<html>
<head> 
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
</head>
<body>


	<form>
		Username: <input type="text"  id="username"/ > <br>
		Email: <input type="email"  maxlength="64" id="email"/ > <br>
		Password: <input type="password"  id="password1" / > <br>
		Confirm Password: <input type="password"  id="password2"/ >
		<button id="registrate">Registrate</button>
		<br><br>
	</form>

	<script language="javascript">

	$("#registrate").click(function(){
		var username = $("#username").val();
		var password1 = $("#password1").val();
		var password2 = $("#password2").val();
		var email = $('#email').val();
		

		if(password1!=password2)
		{
			alert("passwords are not the same");
			return false;
		}

		registrate(username, password1, email);
		return false;
	});

	function registrate(username, password, email)
	{
		$.ajax({
			type: 'POST',
			url: 'registrate.pl',
			data: { "username" : username , "password" : password, "email" : email},
			success : function(response) {
				if (response==1)
				{
					alert("This username is taken. Choose another one");
				}
				else if (response == 2)
				{
					alert("Your registration is successfull.");
					window.open ('index.html','_self',false);
				}
				else if (response == 3)
				{
					alert("This email is alredy taken.");
					
				}
				else if (response == 4)
				{
					alert("This email is not valid.");
					
				}
			}
		});
	}
	</script>

</body>
</html>